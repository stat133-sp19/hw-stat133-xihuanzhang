klay$shot_made_flag[klay$shot_made_flag == "y"]<- c("shot_yes")
stephen$shot_made_flag[stephen$shot_made_flag == "n"]<- c("shot_no")
stephen$shot_made_flag[stephen$shot_made_flag == "y"]<- c("shot_yes")
andre$minute <- 12*andre$period - andre$minutes_remaining
draymond$minute <- 12*draymond$period - draymond$minutes_remaining
kevin$minute <- 12*kevin$period - kevin$minutes_remaining
klay$minute <- 12*klay$period - klay$minutes_remaining
stephen$minute <- 12*stephen$period - stephen$minutes_remaining
sink(file = "../output/andre-iguodala-summary.txt")
summary(andre)
sink()
sink(file = "../output/draymond-green-summary.txt")
summary(draymond)
sink()
sink(file = "../output/kevin-durant-summary.txt")
summary(kevin)
sink()
sink(file = "../output/klay-thompson-summary.txt")
summary(klay)
sink()
sink(file = "../output/stephen-curry-summary.txt")
summary(stephen)
sink()
total <- rbind(andre, draymond, kevin, klay, stephen)
write.csv(total, "../data/shots-data.csv")
sink(file = "../output/shots-data-summary.txt")
summary(total)
sink()
court_file <- "../images/nba-court.jpg"
court_image <- rasterGrob(
readJPEG(court_file),
width = unit(1, "npc"),
height = unit(1, "npc")
)
pdf(file = "../images/andre-iguodala-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Andre Iguodala")+ theme_minimal()
dev.off()
pdf(file = "../images/draymond-green-shot-chart.pdf")
ggplot(data = draymond)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Draymond Green")+ theme_minimal()
dev.off()
pdf(file = "../images/kevin-durant-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Kevin Durant")+ theme_minimal()
dev.off()
pdf(file = "../images/klay-thompson-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Klay Thompson")+ theme_minimal()
dev.off()
pdf(file = "../images/stephen-curry-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Stephen Curry")+ theme_minimal()
dev.off()
pdf(file = "../images/gsw-shot-chart.pdf", width = 8, height = 7, title = "Shot Charts")
ggplot(data = total)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
theme_minimal()+
facet_wrap(.~ name)
dev.off()
png(filename = "../images/gsw-shot-chart.png", width = 8, height = 7, units = "in", res = 1200)
ggplot(data = total)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
theme_minimal()+
facet_wrap(.~ name)
dev.off()
ggplot(data = total)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
theme_minimal()+
facet_wrap(.~ name)
View(andre)
install.packages("ggplot2")
library(ggplot2)
court_file <- "../images/nba-court.jpg"
court_image <- rasterGrob(
readJPEG(court_file),
width = unit(1, "npc"),
height = unit(1, "npc")
)
pdf(file = "../images/andre-iguodala-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Andre Iguodala")+ theme_minimal()
dev.off()
pdf(file = "../images/draymond-green-shot-chart.pdf")
ggplot(data = draymond)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Draymond Green")+ theme_minimal()
dev.off()
pdf(file = "../images/kevin-durant-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Kevin Durant")+ theme_minimal()
dev.off()
pdf(file = "../images/klay-thompson-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Klay Thompson")+ theme_minimal()
dev.off()
pdf(file = "../images/stephen-curry-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Stephen Curry")+ theme_minimal()
dev.off()
pdf(file = "../images/gsw-shot-chart.pdf", width = 8, height = 7, title = "Shot Charts")
ggplot(data = total)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
theme_minimal()+
facet_wrap(.~ name)
dev.off()
png(filename = "../images/gsw-shot-chart.png", width = 8, height = 7, units = "in", res = 1200)
ggplot(data = total)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
theme_minimal()+
facet_wrap(.~ name)
dev.off()
getwd()
court_file <- "./images/nba-court.jpg"
court_image <- rasterGrob(
readJPEG(court_file),
width = unit(1, "npc"),
height = unit(1, "npc")
)
pdf(file = "../images/andre-iguodala-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Andre Iguodala")+ theme_minimal()
dev.off()
pdf(file = "../images/draymond-green-shot-chart.pdf")
ggplot(data = draymond)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Draymond Green")+ theme_minimal()
dev.off()
pdf(file = "../images/kevin-durant-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Kevin Durant")+ theme_minimal()
dev.off()
pdf(file = "../images/klay-thompson-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Klay Thompson")+ theme_minimal()
dev.off()
pdf(file = "../images/stephen-curry-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Stephen Curry")+ theme_minimal()
dev.off()
pdf(file = "../images/gsw-shot-chart.pdf", width = 8, height = 7, title = "Shot Charts")
ggplot(data = total)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
theme_minimal()+
facet_wrap(.~ name)
dev.off()
png(filename = "../images/gsw-shot-chart.png", width = 8, height = 7, units = "in", res = 1200)
ggplot(data = total)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
theme_minimal()+
facet_wrap(.~ name)
dev.off()
court_file <- "./images/nba-court.jpg"
court_image <- rasterGrob(
readJPEG(court_file),
width = unit(1, "npc"),
height = unit(1, "npc")
)
pdf(file = "../images/andre-iguodala-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Andre Iguodala")+ theme_minimal()
dev.off()
pdf(file = "../images/draymond-green-shot-chart.pdf")
ggplot(data = draymond)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Draymond Green")+ theme_minimal()
dev.off()
pdf(file = "../images/kevin-durant-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Kevin Durant")+ theme_minimal()
dev.off()
pdf(file = "../images/klay-thompson-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Klay Thompson")+ theme_minimal()
dev.off()
pdf(file = "../images/stephen-curry-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Stephen Curry")+ theme_minimal()
dev.off()
pdf(file = "../images/gsw-shot-chart.pdf", width = 8, height = 7, title = "Shot Charts")
ggplot(data = total)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
theme_minimal()+
facet_wrap(.~ name)
dev.off()
png(filename = "../images/gsw-shot-chart.png", width = 8, height = 7, units = "in", res = 1200)
ggplot(data = total)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
theme_minimal()+
facet_wrap(.~ name)
dev.off()
getwd()
court_file <- "./images/nba-court.jpg"
install.packages(c("jpeg","grid"))
install.packages(c("jpeg", "grid"))
library(jpeg)
library(grid)
court_image <- rasterGrob(
readJPEG(court_file),
width = unit(1, "npc"),
height = unit(1, "npc")
)
pdf(file = "../images/andre-iguodala-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Andre Iguodala")+ theme_minimal()
dev.off()
pdf(file = "../images/draymond-green-shot-chart.pdf")
ggplot(data = draymond)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Draymond Green")+ theme_minimal()
dev.off()
pdf(file = "../images/kevin-durant-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Kevin Durant")+ theme_minimal()
dev.off()
pdf(file = "../images/klay-thompson-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Klay Thompson")+ theme_minimal()
dev.off()
pdf(file = "../images/stephen-curry-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Stephen Curry")+ theme_minimal()
dev.off()
pdf(file = "../images/gsw-shot-chart.pdf", width = 8, height = 7, title = "Shot Charts")
ggplot(data = total)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
theme_minimal()+
facet_wrap(.~ name)
dev.off()
png(filename = "../images/gsw-shot-chart.png", width = 8, height = 7, units = "in", res = 1200)
ggplot(data = total)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
theme_minimal()+
facet_wrap(.~ name)
dev.off()
court_image <- rasterGrob(
readJPEG(court_file),
width = unit(1, "npc"),
height = unit(1, "npc")
)
court_file <- "./images/nba-court.jpg"
court_image <- rasterGrob(
readJPEG(court_file),
width = unit(1, "npc"),
height = unit(1, "npc")
)
court_file
court_file <- "./images/nba-court.jpg"
court_image <- rasterGrob(
readJPEG(court_file),
width = unit(1, "npc"),
height = unit(1, "npc")
)
getwd()
court_file <- "../images/nba-court.jpg"
court_image <- rasterGrob(
readJPEG(court_file),
width = unit(1, "npc"),
height = unit(1, "npc")
)
pdf(file = "../images/andre-iguodala-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Andre Iguodala")+ theme_minimal()
dev.off()
pdf(file = "../images/draymond-green-shot-chart.pdf")
ggplot(data = draymond)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Draymond Green")+ theme_minimal()
dev.off()
pdf(file = "../images/kevin-durant-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Kevin Durant")+ theme_minimal()
dev.off()
pdf(file = "../images/klay-thompson-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Klay Thompson")+ theme_minimal()
dev.off()
pdf(file = "../images/stephen-curry-shot-chart.pdf")
ggplot(data = andre)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
ggtitle("Shot Chart: Stephen Curry")+ theme_minimal()
dev.off()
pdf(file = "../images/gsw-shot-chart.pdf", width = 8, height = 7, title = "Shot Charts")
ggplot(data = total)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
theme_minimal()+
facet_wrap(.~ name)
dev.off()
png(filename = "../images/gsw-shot-chart.png", width = 8, height = 7, units = "in", res = 1200)
ggplot(data = total)+
annotation_custom(court_image, -250, 250, -50, 420)+
geom_point(aes(x = x, y = y, color =  shot_made_flag))+
ylim(-50,420)+
theme_minimal()+
facet_wrap(.~ name)
dev.off()
```{r}
install.packages("dplyr")
install.packages("dplyr")
library(dplyr)
knitr::include_graphics("/Users/zhangxihuan/Desktop/workout01/images/gsw-shot-chart.png")
newdata <- read.csv(file = "./data/shots-data.csv", header = TRUE,sep = ",")
name_shottype <- select(newdata, name, shot_type)
View(name_shottype)
View(newdata)
newdata <- read.csv(file = "./data/shots-data.csv", header = TRUE,sep = ",")
name_shottype <- select(newdata, name, shot_type, shot_made_flag)
View(name_shottype)
two_points <- filter(name_shottype, shot_type == "2PT Field Goal")
View(two_points)
length(two_points$shot_made_flag)
two_points <- filter(name_shottype, shot_type == "2PT Field Goal")
summarise(group_by(two_points, name), total = length(shot_type), made = length(shot_made_flag == "shot_yes"), perc_made = made/length )
length(shot_made_flag == "shot_yes")
length(two_points$shot_made_flag == "shot_yes")
length(two_points$shot_type)
sum(two_points$shot_made_flag == "shot_yes")
two_points <- filter(name_shottype, shot_type == "2PT Field Goal")
summarise(group_by(two_points, name), total = length(shot_type), made = sum(shot_made_flag == "shot_yes"), perc_made = made/length )
two_points <- filter(name_shottype, shot_type == "2PT Field Goal")
summarise(group_by(two_points, name), total = length(two_points$shot_type), made = sum(two_points$shot_made_flag == "shot_yes"), perc_made = made/length )
length(two_points$shot_type)
sum(two_points$shot_made_flag == "shot_yes")
two_points <- filter(name_shottype, shot_type == "2PT Field Goal")
summarise(group_by(two_points, name), total = length(two_points$shot_type), made = sum(two_points$shot_made_flag == "shot_yes"), perc_made = made/total )
two_points <- filter(name_shottype, shot_type == "2PT Field Goal")
summarise(group_by(two_points, name),
total = length(two_points$shot_type),
made = sum(two_points$shot_made_flag == "shot_yes"),
perc_made = made/total
)
two_points <- filter(name_shottype, shot_type == "2PT Field Goal")
summarise(group_by(two_points, name),
total = length(shot_type),
made = sum(shot_made_flag == "shot_yes"),
perc_made = made/total
)
two_points <- filter(name_shottype, shot_type == "2PT Field Goal")
arrange(
summarise(group_by(two_points, name),
total = length(shot_type),
made = sum(shot_made_flag == "shot_yes"),
perc_made = made/total
)
desc(perc_made)
two_points <- filter(name_shottype, shot_type == "2PT Field Goal")
arrange(
summarise(group_by(two_points, name),
total = length(shot_type),
made = sum(shot_made_flag == "shot_yes"),
perc_made = made/total
)
desc(perc_made))
two_points <- filter(name_shottype, shot_type == "2PT Field Goal")
arrange(
summarise(group_by(two_points, name),
total = length(shot_type),
made = sum(shot_made_flag == "shot_yes"),
perc_made = made/total
)
desc(perc_made))
two_points <- filter(name_shottype, shot_type == "2PT Field Goal")
arrange(
summarise(group_by(two_points, name),
total = length(shot_type),
made = sum(shot_made_flag == "shot_yes"),
perc_made = made/total
),
desc(perc_made))
three_points <- filter(name_shottype, shot_type == "3PT Field Goal")
arrange(
summarise(group_by(three_points, name),
total = length(shot_type),
made = sum(shot_made_flag == "shot_yes"),
perc_made = made/total
),
desc(perc_made))
#Effective Shooting % by Player
arrange(
summarise(group_by(name_shottype, name),
total = length(shot_type),
made = sum(shot_made_flag == "shot_yes"),
perc_made = made/total
),
desc(perc_made))
#3PT Effective Shooting % by Player
three_points <- filter(name_shottype, shot_type == "3PT Field Goal")
arrange(
summarise(group_by(three_points, name),
total = length(shot_type),
made = sum(shot_made_flag == "shot_yes"),
perc_made = made/total
),
desc(perc_made))
#2PT Effective Shooting % by Player
two_points <- filter(name_shottype, shot_type == "2PT Field Goal")
arrange(
summarise(group_by(two_points, name),
total = length(shot_type),
made = sum(shot_made_flag == "shot_yes"),
perc_made = made/total
),
desc(perc_made))
getwd()
